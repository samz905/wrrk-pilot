prospect_leads:
  description: |
    Find high-intent BUYER leads for: {product_description}
    Target: {target_leads} qualified leads
    ICP: {icp_criteria}

    ================================================================================
    MANDATORY: YOU MUST USE BOTH REDDIT AND TECHCRUNCH
    ================================================================================

    REQUIRED EXECUTION ORDER:
    1. First, run Reddit strategy to get ~50% of leads
    2. Then, run TechCrunch strategy to get the other ~50%
    3. DO NOT skip TechCrunch! Recently funded companies = CONFIRMED BUDGET

    ================================================================================
    STEPPED WORKFLOW - You have stepped tools that let you REASON after each step
    ================================================================================

    You have stepped tools. Review results after EACH tool call. Adapt as needed.
    If results are poor, try different query or skip to next strategy.

    STEP 1: ANALYZE & PLAN
    ----------------------
    - What product category is this?
    - Who are likely competitors?
    - For {target_leads} leads, plan: Reddit (~50%) + TechCrunch (~50%)
    - YOU MUST USE BOTH PLATFORMS - this is required!

    STEP 2: REDDIT STRATEGY
    -----------------------
    a) reddit_search(query) -> Review quality
       - Quality HIGH? -> Continue to reddit_score
       - Quality LOW? -> Try different query (e.g., "frustrated with [competitor]")
       - Still LOW after 2 tries? -> Skip to TechCrunch strategy

    b) reddit_score(posts) -> Review scores
       - Many posts >= 50? -> Continue to reddit_extract
       - Few high scores? -> May get weak leads, adjust expectations

    c) reddit_extract(posts) -> Get raw leads
       - Returns leads but WARNING: may include sellers!

    d) filter_sellers(leads) -> CRITICAL! Remove promoters
       - Only BUYER leads remain

    STEP 3: TECHCRUNCH STRATEGY
    ---------------------------
    a) techcrunch_fetch() -> Get recent funding articles
       - TechCrunch has fresh funding news daily
       - Recently funded = CONFIRMED BUDGET

    b) techcrunch_select_articles(articles) -> Select relevant ones
       - Pick articles for startups in your target industry
       - Look for Series A/B/C rounds

    c) techcrunch_extract_companies(articles) -> Get company list
       - Extracts company name, funding amount, description
       - Returns companies_for_linkedin ready for next step

    d) linkedin_company_batch_search(companies_for_linkedin) -> Get LinkedIn URLs
       - Finds each company's LinkedIn page
       - Returns companies with URLs for employee search

    e) linkedin_employees_batch_search(companies, query) -> Get employees PARALLEL!
       - Pass ALL companies at once (not one by one!)
       - Searches all companies in parallel (~2 min total vs ~2 min EACH)
       - Returns employees_by_company ready for next step

    f) techcrunch_select_decision_makers(employees) -> Pick the right contacts
       - Find Founders, CEOs, CTOs at funded companies
       - These are HIGH INTENT leads (have budget!)

    g) filter_sellers(leads) -> Remove any promoters
       - TechCrunch leads may include self-promoters too

    STEP 4: REVIEW & ADAPT
    ----------------------
    After each strategy, ask yourself:
    - Do I have enough leads?
    - Are the leads high quality?
    - Should I retry with different query?

    STEP 5: FINAL AGGREGATION
    -------------------------
    - Combine leads from all strategies
    - Run filter_sellers ONE MORE TIME on all leads (safety check)
    - Score and rank by intent
    - Return top {target_leads}

    ================================================================================
    CRITICAL: BUYER vs SELLER - THE MOST IMPORTANT RULE
    ================================================================================

    ONLY include BUYERS. FILTER OUT SELLERS.

    SELLER signals (REMOVE these leads):
    - "I built X", "We launched Y", "My startup"
    - "Check out", "Introducing", "Just launched"
    - Promoting their own product
    - "We developed", "I created", "My tool"

    BUYER signals (KEEP these leads):
    - "Looking for", "Need help with", "Recommendations?"
    - "Frustrated with", "Alternative to", "Issues with"
    - Asking questions, seeking solutions
    - Complaining about current tools

    EXAMPLE:
    - Andy Roberts: "I built UIBrush for designers" = SELLER = REMOVE (score 0)
    - John Smith: "Looking for AI design tool, Figma is too slow" = BUYER = KEEP

    Always use filter_sellers before finalizing leads!

  expected_output: |
    {target_leads} qualified BUYER leads with:
    - Clear buying intent (NOT selling!)
    - Source platform and URL
    - Intent score >= 60
    - Reasoning for each score

    Strategy execution summary:
    - Tools called and decisions made at each step
    - Leads per strategy (Reddit, TechCrunch)
    - Sellers filtered (with names)
    - Quality assessment

    Lead format:
    - name: Full name
    - title: Job title
    - company: Company name
    - linkedin_url: If available
    - intent_signal: Quote showing BUYING intent
    - intent_score: 0-100
    - source_platform: reddit or techcrunch
    - source_url: Original URL
    - priority: hot (>=80), warm (60-79), cold (<60)
    - scoring_reasoning: Why this score

  agent: orchestrator
